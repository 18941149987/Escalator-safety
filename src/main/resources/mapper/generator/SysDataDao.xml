<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="io.renren.modules.generator.dao.SysDataDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="io.renren.modules.generator.entity.SysDataEntity" id="sysDataMap">
        <result property="id" column="id"/>
        <result property="shock" column="shock"/>
        <result property="temperature" column="temperature"/>
        <result property="flame" column="flame"/>
        <result property="smok" column="smok"/>
        <result property="pressure" column="pressure"/>
        <result property="createTime" column="create_time"/>
    </resultMap>

    <insert id="insert" keyProperty="id" keyColumn="true">
        INSERT INTO sys_data(shock, temperature, flame, smok, pressure, create_time)
        VALUES (#{param.shake}, #{param.temp}, #{param.fire}, #{param.mq2}, #{param.press}, #{param.create_time})
    </insert>

    <select id="data" resultType="java.util.Map">
        SELECT avg(shock) AS shock, avg(temperature) AS temperature, avg(flame) AS flame,
               avg(smok) AS smok, avg(pressure) AS pressure, LEFT(create_time, 10) AS ctime
        FROM sys_data
        WHERE 1=1
        AND LEFT(create_time, 10) IN
        <foreach collection="date" item="item" index="index" open="(" separator="," close=")">
            #{item}
        </foreach>
        GROUP BY LEFT(create_time, 10)
    </select>

</mapper>